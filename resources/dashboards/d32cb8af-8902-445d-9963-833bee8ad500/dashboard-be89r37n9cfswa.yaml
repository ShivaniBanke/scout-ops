apiVersion: grizzly.grafana.com/v1alpha1
kind: Dashboard
metadata:
    folder: d32cb8af-8902-445d-9963-833bee8ad500
    name: be89r37n9cfswa
spec:
    __elements: {}
    __inputs:
        - description: ""
          label: Scout DS
          name: DS_ScoutAltCH
          pluginId: vertamedia-clickhouse-datasource
          pluginName: Altinity plugin for ClickHouse
          type: datasource
    __requires:
        - id: grafana
          name: Grafana
          type: grafana
          version: 11.3.0
        - id: stat
          name: Stat
          type: panel
          version: ""
        - id: timeseries
          name: Time series
          type: panel
          version: ""
        - id: vertamedia-clickhouse-datasource
          name: Altinity plugin for ClickHouse
          type: datasource
          version: 3.2.4
    annotations:
        list:
            - builtIn: 1
              datasource:
                type: grafana
                uid: -- Grafana --
              enable: true
              hide: true
              iconColor: rgba(0, 211, 255, 1)
              name: Annotations & Alerts
              type: dashboard
    editable: true
    fiscalYearStartMonth: 0
    graphTooltip: 0
    links: []
    panels:
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides:
                - matcher:
                    id: byName
                    options: "1"
                  properties:
                    - id: displayName
                      value: Pending
                - matcher:
                    id: byName
                    options: "2"
                  properties:
                    - id: displayName
                      value: Running
                - matcher:
                    id: byName
                    options: "4"
                  properties:
                    - id: displayName
                      value: Failed
          gridPos:
            h: 7
            w: 7
            x: 0
            "y": 0
          id: 4
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: "select $timeSeries t, Value, count(distinct(ResourceAttributes['k8s.deployment.name'])) Deployments from $table where $timeFilter \nAND MetricName = 'k8s.pod.phase' \nAND ResourceAttributes['k8s.deployment.name'] != ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by t, Value  order by t \n  "
              rawQuery: "/* grafana dashboard=k8s stats, user=1 */\nselect (intDiv(toFloat64(TimeUnix) * 1000, (30 * 1000)) * (30 * 1000)) t, Value, count(distinct(ResourceAttributes['k8s.deployment.name'])) Deployments from base14.otel_metrics_gauge where TimeUnix >= toDateTime64(1735338906, 3) AND TimeUnix <= toDateTime64(1735382106, 3) \nAND MetricName = 'k8s.pod.phase' \nAND ResourceAttributes['k8s.deployment.name'] != ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by t, Value  order by t desc"
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Deployments by Phase
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides:
                - matcher:
                    id: byName
                    options: "1"
                  properties:
                    - id: displayName
                      value: Pending
                - matcher:
                    id: byName
                    options: "2"
                  properties:
                    - id: displayName
                      value: Running
                - matcher:
                    id: byName
                    options: "4"
                  properties:
                    - id: displayName
                      value: Failed
          gridPos:
            h: 7
            w: 5
            x: 7
            "y": 0
          id: 5
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: "select $timeSeries t, Value, count(distinct(ResourceAttributes['k8s.statefulset.name'])) Deployments from $table where $timeFilter \nAND MetricName = 'k8s.pod.phase' \nAND ResourceAttributes['k8s.statefulset.name'] != ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by t, Value  order by t \n  "
              rawQuery: "/* grafana dashboard=k8s stats, user=1 */\nselect (intDiv(toFloat64(TimeUnix) * 1000, (2 * 1000)) * (2 * 1000)) t, Value, count(distinct(ResourceAttributes['k8s.statefulset.name'])) Deployments from base14.otel_metrics_gauge where TimeUnix >= toDateTime64(1735380330, 3) AND TimeUnix <= toDateTime64(1735382130, 3) \nAND MetricName = 'k8s.pod.phase' \nAND ResourceAttributes['k8s.deployment.name'] != ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by t, Value  order by t"
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Statefulsets by Phase
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides:
                - matcher:
                    id: byName
                    options: "1"
                  properties:
                    - id: displayName
                      value: Pending
                - matcher:
                    id: byName
                    options: "2"
                  properties:
                    - id: displayName
                      value: Running
                - matcher:
                    id: byName
                    options: "4"
                  properties:
                    - id: displayName
                      value: Failed
          gridPos:
            h: 7
            w: 6
            x: 12
            "y": 0
          id: 7
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: "select $timeSeries t, Value, count(distinct(ResourceAttributes['k8s.pod.name']))  from $table where $timeFilter \nAND MetricName = 'k8s.pod.phase' \n  and ResourceAttributes['k8s.deployment.name'] == ''\n  and ResourceAttributes['k8s.statefulset.name'] == ''\n  and ResourceAttributes['k8s.daemonset.name'] == ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by t, Value  order by t "
              rawQuery: "/* grafana dashboard=k8s stats, user=1 */\nselect (intDiv(toFloat64(TimeUnix) * 1000, (2 * 1000)) * (2 * 1000)) t, Value, count(distinct(ResourceAttributes['k8s.pod.name']))  from base14.otel_metrics_gauge where TimeUnix >= toDateTime64(1735379543, 3) AND TimeUnix <= toDateTime64(1735383143, 3) \nAND MetricName = 'k8s.pod.phase' \n  and ResourceAttributes['k8s.deployment.name'] == ''\n  and ResourceAttributes['k8s.statefulset.name'] == ''\n  and ResourceAttributes['k8s.daemonset.name'] == ''\n  and ResourceAttributes['k8s.namespace.name'] != 'kube-system'\ngroup by Value  order by t"
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
          title: Other pods by Phase
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides:
                - matcher:
                    id: byName
                    options: "1"
                  properties:
                    - id: displayName
                      value: Pending
                - matcher:
                    id: byName
                    options: "2"
                  properties:
                    - id: displayName
                      value: Running
                - matcher:
                    id: byName
                    options: "4"
                  properties:
                    - id: displayName
                      value: Failed
          gridPos:
            h: 7
            w: 6
            x: 18
            "y": 0
          id: 6
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: "select $timeSeries t, Value, count(distinct(ResourceAttributes['k8s.pod.name'])) Deployments from $table where $timeFilter \nAND MetricName = 'k8s.pod.phase' \n  and ResourceAttributes['k8s.namespace.name'] == 'kube-system'\ngroup by t, Value  order by t \n  "
              rawQuery: "/* grafana dashboard=k8s stats, user=1 */\nselect (intDiv(toFloat64(TimeUnix) * 1000, (2 * 1000)) * (2 * 1000)) t, Value, count(distinct(ResourceAttributes['k8s.po.name'])) Deployments from base14.otel_metrics_gauge where TimeUnix >= toDateTime64(1735380392, 3) AND TimeUnix <= toDateTime64(1735382192, 3) \nAND MetricName = 'k8s.pod.phase' \n  and ResourceAttributes['k8s.namespace.name'] == 'kube-system'\ngroup by t, Value  order by t"
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Kube System Pods
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 0
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: auto
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 15
            w: 12
            x: 0
            "y": 7
          id: 1
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: single
                sort: none
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: "$columns(ResourceAttributes['k8s.container.name'] container, anyLast(Value) c) from $table where $timeFilter \nAND MetricName = 'k8s.container.restarts' "
              rawQuery: "/* grafana dashboard=New dashboard, user=1 */\nSELECT t, groupArray((container, c)) AS groupArr FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (300 * 1000)) * (300 * 1000)) AS t, ResourceAttributes['k8s.container.name'] container, anyLast(Value) c from base14.otel_metrics_gauge WHERE TimeUnix >= toDateTime64(1735205207, 3) AND TimeUnix <= toDateTime64(1735378007, 3) AND TimeUnix >= toDateTime64(1735205207, 3) AND TimeUnix <= toDateTime64(1735378007, 3) \nAND MetricName = 'k8s.container.restart' GROUP BY t, container ORDER BY t, container) GROUP BY t ORDER BY t"
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Total Restarts
          type: timeseries
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: line
                    fillOpacity: 0
                    gradientMode: none
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: auto
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 15
            w: 12
            x: 12
            "y": 7
          id: 2
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                mode: single
                sort: none
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: $increaseColumns(ResourceAttributes['k8s.container.name'], Value) from $table where MetricName = 'k8s.container.restarts'
              rawQuery: |-
                /* grafana dashboard=New dashboard, user=1 */
                SELECT t, groupArray((increaseColumns, max_0_Increase)) AS groupArr FROM ( SELECT t, increaseColumns, if(runningDifference(max_0) < 0 OR neighbor(increaseColumns,-1,increaseColumns) != increaseColumns, 0, runningDifference(max_0)) AS max_0_Increase FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (20 * 1000)) * (20 * 1000)) AS t, ResourceAttributes['k8s.container.name'] AS increaseColumns, max(Value) AS max_0 from base14.otel_metrics_gauge WHERE TimeUnix >= toDateTime64(1735368315, 3) AND TimeUnix <= toDateTime64(1735379115, 3) AND MetricName = 'k8s.container.restarts' GROUP BY t, increaseColumns ORDER BY increaseColumns, t)) GROUP BY t ORDER BY t
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
              useWindowFuncForMacros: true
          title: Restarts In period
          type: timeseries
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 7
            w: 6
            x: 0
            "y": 22
          id: 10
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: |-
                $columns(ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c) from $table
                WHERE MetricName = 'k8s.pod.phase' and Value = 3
              rawQuery: |-
                /* grafana dashboard=k8s stats, user=1 */
                SELECT t, groupArray((container, c)) AS groupArr FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (10 * 1000)) * (10 * 1000)) AS t, ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c from base14.otel_metrics_gauge
                WHERE TimeUnix >= toDateTime64(1735373828, 3) AND TimeUnix <= toDateTime64(1735384628, 3) AND MetricName = 'k8s.pod.phase' and Value = GROUP BY t, container ORDER BY t, container) GROUP BY t ORDER BY t
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Successful Pods in Period
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 7
            w: 6
            x: 6
            "y": 22
          id: 3
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: |-
                $columns(ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c) from $table
                where MetricName = 'k8s.pod.phase' and Value = 4
              rawQuery: |-
                /* grafana dashboard=k8s stats, user=1 */
                SELECT t, groupArray((container, c)) AS groupArr FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (10 * 1000)) * (10 * 1000)) AS t, ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c from base14.otel_metrics_gauge
                wher MetricName = 'k8s.pod.phase' and Value = 4 WHERE TimeUnix >= toDateTime64(1735372831, 3) AND TimeUnix <= toDateTime64(1735383631, 3) GROUP BY t, container ORDER BY t, container) GROUP BY t ORDER BY t
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Failed Pods in Period
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 7
            w: 6
            x: 12
            "y": 22
          id: 8
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: |-
                $columns(ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c) from $table
                WHERE MetricName = 'k8s.pod.phase' and Value = 1
              rawQuery: |-
                /* grafana dashboard=k8s stats, user=1 */
                SELECT t, groupArray((container, c)) AS groupArr FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (10 * 1000)) * (10 * 1000)) AS t, ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c from base14.otel_metrics_gauge
                WHERE TimeUnix >= toDateTime64(1735372831, 3) AND TimeUnix <= toDateTime64(1735383631, 3) ANDMetricName = 'k8s.pod.phase' and Value = 1 GROUP BY t, container ORDER BY t, container) GROUP BY t ORDER BY t
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Pending Pods in Period
          type: stat
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                          value: null
            overrides: []
          gridPos:
            h: 7
            w: 6
            x: 18
            "y": 22
          id: 9
          options:
            colorMode: value
            graphMode: area
            justifyMode: auto
            orientation: auto
            percentChangeColorMode: standard
            reduceOptions:
                calcs:
                    - lastNotNull
                fields: ""
                values: false
            showPercentChange: false
            textMode: value_and_name
            wideLayout: true
          pluginVersion: 11.3.0
          targets:
            - adHocFilters: []
              add_metadata: true
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              query: |-
                $columns(ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c) from $table
                WHERE MetricName = 'k8s.pod.phase' and Value = 5
              rawQuery: |-
                /* grafana dashboard=k8s stats, user=1 */
                SELECT t, groupArray((container, c)) AS groupArr FROM ( SELECT (intDiv(toFloat64(TimeUnix) * 1000, (10 * 1000)) * (10 * 1000)) AS t, ResourceAttributes['k8s.pod.name'] container, anyLast(Value) c from base14.otel_metrics_gauge
                WHERE TimeUnix >= toDateTime64(1735372831, 3) AND TimeUnix <= toDateTime64(1735383631, 3) AND MetricName = 'k8s.pod.phase' and Value = GROUP BY t, container ORDER BY t, container) GROUP BY t ORDER BY t
              refId: A
              round: 0s
              skip_comments: true
              table: otel_metrics_gauge
          title: Phase-unknown Pods in Period
          type: stat
    preload: false
    schemaVersion: 40
    tags: []
    templating:
        list: []
    time:
        from: now-3h
        to: now
    timepicker: {}
    timezone: browser
    title: k8s pods
    uid: be89r37n9cfswa
    weekStart: ""
