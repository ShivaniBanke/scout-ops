apiVersion: grizzly.grafana.com/v1alpha1
kind: Dashboard
metadata:
    folder: d32cb8af-8902-445d-9963-833bee8ad500
    name: 04af4363-d6f5-4359-af46-2fc965ddaf8d
spec:
    annotations:
        list:
            - builtIn: 1
              datasource:
                type: grafana
                uid: -- Grafana --
              enable: true
              hide: true
              iconColor: rgba(0, 211, 255, 1)
              name: Annotations & Alerts
              type: dashboard
    editable: true
    fiscalYearStartMonth: 0
    graphTooltip: 0
    links: []
    panels:
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                custom:
                    align: auto
                    cellOptions:
                        type: auto
                    inspect: false
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 9
            w: 12
            x: 0
            "y": 0
          id: 1
          options:
            cellHeight: sm
            footer:
                countRows: false
                fields: ""
                reducer:
                    - sum
                show: false
            showHeader: true
          pluginVersion: 12.0.2+security-01
          targets:
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: "SELECT\n    Service,\n    sum(NumMetrics) as TotalNumMetrics\nFROM (\n    -- From the sum table\n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_sum\n    WHERE $timeFilter\n    AND ServiceName in (${service:singlequote})\n    AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    -- From the gauge table\n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_gauge\n    WHERE $timeFilter\n        AND ServiceName in (${service:singlequote})\n        AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    -- From the summary table\n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_summary\n    WHERE $timeFilter\n        AND ServiceName in (${service:singlequote})\n        AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    -- From the histogram table\n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_histogram\n    WHERE $timeFilter\n        AND ServiceName in (${service:singlequote})\n        AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    GROUP BY Service\n) as combined\nGROUP BY Service\nORDER BY TotalNumMetrics DESC"
              rawQuery: "/* grafana dashboard='Metrics Collected v2', user='3' */\nSELECT\n    Service,\n    sum(NumMetrics) as TotalNumMetrics\nFROM (\n    \n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_sum\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n    AND ServiceName in ('ecs','otelcol-contrib')\n    AND ResourceAttributes['environment'] = 'staging'\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    \n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_gauge\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n        AND ServiceName in ('ecs','otelcol-contrib')\n        AND ResourceAttributes['environment'] = 'staging'\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    \n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_summary\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n        AND ServiceName in ('ecs','otelcol-contrib')\n        AND ResourceAttributes['environment'] = 'staging'\n\n    GROUP BY Service\n    \n    UNION ALL\n    \n    \n    SELECT \n        distinct(ServiceName) as Service, \n        count(distinct(MetricName)) as NumMetrics \n    FROM base14.otel_metrics_histogram\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n        AND ServiceName in ('ecs','otelcol-contrib')\n        AND ResourceAttributes['environment'] = 'staging'\n\n    GROUP BY Service\n) as combined\nGROUP BY Service\nORDER BY TotalNumMetrics DESC"
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
              useWindowFuncForMacros: true
          title: Unique Metrics by Service
          type: table
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                custom:
                    align: auto
                    cellOptions:
                        type: auto
                    inspect: false
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 9
            w: 12
            x: 12
            "y": 0
          id: 2
          options:
            cellHeight: sm
            footer:
                countRows: false
                fields: ""
                reducer:
                    - sum
                show: false
            showHeader: true
          pluginVersion: 12.0.2+security-01
          targets:
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: "SELECT\n    MetricName,\n    groupArray(TableName) as Tables\nFROM (\n    -- From the sum table\n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_sum' as TableName\n    FROM otel_metrics_sum\n    WHERE $timeFilter\n    AND ServiceName in (${service:singlequote})\n    AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    UNION ALL\n    \n    -- From the gauge table\n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_gauge' as TableName\n    FROM otel_metrics_gauge\n    WHERE $timeFilter\n    AND ServiceName in (${service:singlequote})\n    AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    UNION ALL\n    \n    -- From the summary table\n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_summary' as TableName\n    FROM otel_metrics_summary\n    WHERE $timeFilter\n    AND ServiceName in (${service:singlequote})\n    AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n    UNION ALL\n    \n    -- From the histogram table\n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_histogram' as TableName \n    FROM otel_metrics_histogram\n    WHERE $timeFilter\n    AND ServiceName in (${service:singlequote})\n    AND ResourceAttributes['environment'] = ${environment:singlequote}\n\n) as all_metrics\nGROUP BY MetricName\nORDER BY MetricName ASC"
              rawQuery: "/* grafana dashboard='Metrics Collected v2', user='3' */\nSELECT\n    MetricName,\n    groupArray(TableName) as Tables\nFROM (\n    \n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_sum' as TableName\n    FROM otel_metrics_sum\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n    AND ServiceName in ('ecs','otelcol-contrib')\n    AND ResourceAttributes['environment'] = 'staging'\n\n    UNION ALL\n    \n    \n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_gauge' as TableName\n    FROM otel_metrics_gauge\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n    AND ServiceName in ('ecs','otelcol-contrib')\n    AND ResourceAttributes['environment'] = 'staging'\n\n    UNION ALL\n    \n    \n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_summary' as TableName\n    FROM otel_metrics_summary\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n    AND ServiceName in ('ecs','otelcol-contrib')\n    AND ResourceAttributes['environment'] = 'staging'\n\n    UNION ALL\n    \n    \n    SELECT \n        distinct(MetricName) as MetricName,\n        'otel_metrics_histogram' as TableName \n    FROM otel_metrics_histogram\n    WHERE TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)\n    AND ServiceName in ('ecs','otelcol-contrib')\n    AND ResourceAttributes['environment'] = 'staging'\n\n) as all_metrics\nGROUP BY MetricName\nORDER BY MetricName ASC"
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
              useWindowFuncForMacros: true
          title: All Metrics by Type
          type: table
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: thresholds
                custom:
                    align: auto
                    cellOptions:
                        type: auto
                        wrapText: false
                    inspect: true
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
                        - color: red
                          value: 80
            overrides: []
          gridPos:
            h: 8
            w: 12
            x: 0
            "y": 9
          id: 3
          options:
            cellHeight: sm
            footer:
                countRows: false
                fields: ""
                reducer:
                    - sum
                show: false
            showHeader: true
          pluginVersion: 12.0.2+security-01
          targets:
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                --SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t

                select TimeUnix as EntryTime, * from $table where $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                order by TimeUnix DESC LIMIT 5
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='3' */


                select TimeUnix as EntryTime, * from base14.otel_metrics_sum where TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)
                AND ServiceName in ('ecs','otelcol-contrib')
                AND MetricName = 'container.blockio.io_service_bytes_recursive'
                AND ResourceAttributes['environment'] = 'staging'
                order by TimeUnix DESC LIMIT 5
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_sum
              useWindowFuncForMacros: true
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                --SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t

                select TimeUnix as EntryTime, * from $table where $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                order by TimeUnix DESC LIMIT 5
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='3' */


                select TimeUnix as EntryTime, * from base14.otel_metrics_gauge where TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)
                AND ServiceName in ('ecs','otelcol-contrib')
                AND MetricName = 'container.blockio.io_service_bytes_recursive'
                AND ResourceAttributes['environment'] = 'staging'
                order by TimeUnix DESC LIMIT 5
              refId: B
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
              useWindowFuncForMacros: true
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                --SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t

                select TimeUnix as EntryTime, * from $table where $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                order by TimeUnix DESC LIMIT 5
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='3' */


                select TimeUnix as EntryTime, * from base14.otel_metrics_summary where TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)
                AND ServiceName in ('ecs','otelcol-contrib')
                AND MetricName = 'container.blockio.io_service_bytes_recursive'
                AND ResourceAttributes['environment'] = 'staging'
                order by TimeUnix DESC LIMIT 5
              refId: C
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_summary
              useWindowFuncForMacros: true
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: table
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                --SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t

                select TimeUnix as EntryTime, * from $table where $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                order by TimeUnix DESC LIMIT 5
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='3' */


                select TimeUnix as EntryTime, * from base14.otel_metrics_histogram where TimeUnix >= toDateTime64(1752764653,3) AND TimeUnix <= toDateTime64(1752768253,3)
                AND ServiceName in ('ecs','otelcol-contrib')
                AND MetricName = 'container.blockio.io_service_bytes_recursive'
                AND ResourceAttributes['environment'] = 'staging'
                order by TimeUnix DESC LIMIT 5
              refId: D
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_histogram
              useWindowFuncForMacros: true
          title: Last 5 Values
          type: table
        - datasource:
            type: vertamedia-clickhouse-datasource
            uid: ds-scout-altinity-ch
          fieldConfig:
            defaults:
                color:
                    mode: palette-classic
                custom:
                    axisBorderShow: false
                    axisCenteredZero: false
                    axisColorMode: text
                    axisLabel: ""
                    axisPlacement: auto
                    barAlignment: 0
                    barWidthFactor: 0.6
                    drawStyle: bars
                    fillOpacity: 0
                    gradientMode: hue
                    hideFrom:
                        legend: false
                        tooltip: false
                        viz: false
                    insertNulls: false
                    lineInterpolation: linear
                    lineWidth: 1
                    pointSize: 5
                    scaleDistribution:
                        type: linear
                    showPoints: auto
                    spanNulls: false
                    stacking:
                        group: A
                        mode: none
                    thresholdsStyle:
                        mode: "off"
                mappings: []
                thresholds:
                    mode: absolute
                    steps:
                        - color: green
            overrides: []
          gridPos:
            h: 8
            w: 12
            x: 12
            "y": 9
          id: 4
          options:
            legend:
                calcs: []
                displayMode: list
                placement: bottom
                showLegend: true
            tooltip:
                hideZeros: false
                mode: single
                sort: none
          pluginVersion: 12.0.2+security-01
          targets:
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                SELECT $timeSeries as t, avg(Value) FROM $table WHERE $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                 GROUP BY t ORDER BY t
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='5' */
                SELECT (intDiv(toFloat64(TimeUnix) * 1000, (30 * 1000)) * (30 * 1000)) as t, avg(Value) FROM base14.otel_metrics_sum WHERE TimeUnix >= toDateTime64(1753348210,3) AND TimeUnix <= toDateTime64(1753351810,3)
                AND ServiceName in ('appstatus/bakasura/proxy','appstatus/bender','appstatus/devops/flower','appstatus/devops/grafana','appstatus/devops/pgadmin','appstatus/devops/sonarqube','appstatus/devops/vault','appstatus/finmo/alb','appstatus/finmo/api','appstatus/finmo/app','appstatus/finmo/bheema','appstatus/finmo/webhooks','appstatus/hg','appstatus/tara','awsfirehose/metrics','github','otelcol-contrib','postgres/app-finmo-db','rabbitmq/app-finmo-rabbitmq','redis/app-finmo-redis')
                AND MetricName = 'AWS/ApplicationELB/ActiveConnectionCount'
                AND ResourceAttributes['environment'] = 'production'
                 GROUP BY t ORDER BY t
              refId: A
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_sum
              useWindowFuncForMacros: true
            - adHocFilters: []
              adHocValuesQuery: ""
              add_metadata: true
              contextWindowSize: "10"
              database: base14
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              dateTimeColDataType: TimeUnix
              dateTimeType: DATETIME64
              editorMode: sql
              extrapolate: true
              format: time_series
              formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
              hide: false
              interval: ""
              intervalFactor: 1
              nullifySparse: false
              query: |
                SELECT $timeSeries as t, avg(Value) FROM $table WHERE $timeFilter
                AND ServiceName in (${service:singlequote})
                AND MetricName = ${metricName:singlequote}
                AND ResourceAttributes['environment'] = ${environment:singlequote}
                 GROUP BY t ORDER BY t
              rawQuery: |-
                /* grafana dashboard='Metrics Collected v2', user='5' */
                SELECT (intDiv(toFloat64(TimeUnix) * 1000, (30 * 1000)) * (30 * 1000)) as t, avg(Value) FROM base14.otel_metrics_gauge WHERE TimeUnix >= toDateTime64(1753348210,3) AND TimeUnix <= toDateTime64(1753351810,3)
                AND ServiceName in ('appstatus/bakasura/proxy','appstatus/bender','appstatus/devops/flower','appstatus/devops/grafana','appstatus/devops/pgadmin','appstatus/devops/sonarqube','appstatus/devops/vault','appstatus/finmo/alb','appstatus/finmo/api','appstatus/finmo/app','appstatus/finmo/bheema','appstatus/finmo/webhooks','appstatus/hg','appstatus/tara','awsfirehose/metrics','github','otelcol-contrib','postgres/app-finmo-db','rabbitmq/app-finmo-rabbitmq','redis/app-finmo-redis')
                AND MetricName = 'AWS/ApplicationELB/ActiveConnectionCount'
                AND ResourceAttributes['environment'] = 'production'
                 GROUP BY t ORDER BY t
              refId: B
              round: 0s
              showFormattedSQL: true
              skip_comments: true
              table: otel_metrics_gauge
              useWindowFuncForMacros: true
          title: Plot
          type: timeseries
    preload: false
    schemaVersion: 41
    tags: []
    templating:
        list:
            - current:
                text: production
                value: production
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              definition: "SELECT distinct ResourceAttributes['environment']\nFROM $table \nWHERE TimeUnix > now() - interval 1 hour"
              label: Environment
              name: environment
              options: []
              query:
                adHocFilters: []
                adHocValuesQuery: ""
                add_metadata: true
                contextWindowSize: "10"
                database: base14
                datasourceMode: Variable
                dateTimeColDataType: TimeUnix
                dateTimeType: DATETIME64
                editorMode: sql
                extrapolate: true
                format: time_series
                formattedQuery: SELECT $timeSeries as t, count() FROM $table WHERE $timeFilter GROUP BY t ORDER BY t
                interval: ""
                intervalFactor: 1
                nullifySparse: false
                query: "SELECT distinct ResourceAttributes['environment']\nFROM $table \nWHERE TimeUnix > now() - interval 1 hour"
                rawQuery: "/* grafana dashboard='Metrics Collected v2', user='5' */\nSELECT distinct ResourceAttributes['environment']\nFROM base14.otel_metrics_gauge \nWHERE TimeUnix > now() - interval 1 hour"
                round: 0s
                skip_comments: true
                table: otel_metrics_gauge
                useWindowFuncForMacros: true
              refresh: 1
              regex: ""
              type: query
            - current:
                text: All
                value:
                    - $__all
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              definition: "SELECT DISTINCT ServiceName\nFROM (\n\tSELECT ServiceName\n\tFROM base14.otel_metrics_sum\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_gauge\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_summary\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_histogram\n\tWHERE TimeUnix > now() - interval 1 hour\n)\nORDER BY ServiceName"
              description: ""
              includeAll: true
              label: Service
              multi: true
              name: service
              options: []
              query:
                adHocFilters: []
                adHocValuesQuery: ""
                add_metadata: true
                contextWindowSize: "10"
                datasourceMode: Variable
                editorMode: builder
                extrapolate: true
                format: time_series
                formattedQuery: "SELECT DISTINCT ServiceName\nFROM (\n\tSELECT ServiceName\n\tFROM base14.otel_metrics_sum\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_gauge\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_summary\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_histogram\n\tWHERE TimeUnix > now() - interval 1 hour\n)\nORDER BY ServiceName"
                interval: ""
                intervalFactor: 1
                nullifySparse: false
                query: "SELECT DISTINCT ServiceName\nFROM (\n\tSELECT ServiceName\n\tFROM base14.otel_metrics_sum\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_gauge\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_summary\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_histogram\n\tWHERE TimeUnix > now() - interval 1 hour\n)\nORDER BY ServiceName"
                rawQuery: "/* grafana dashboard='Metrics Collected v2', user='5' */\nSELECT DISTINCT ServiceName\nFROM (\n\tSELECT ServiceName\n\tFROM base14.otel_metrics_sum\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_gauge\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_summary\n\tWHERE TimeUnix > now() - interval 1 hour\n\n\tUNION ALL\n\n\tSELECT ServiceName \n\tFROM base14.otel_metrics_histogram\n\tWHERE TimeUnix > now() - interval 1 hour\n)\nORDER BY ServiceName"
                round: 0s
                skip_comments: true
                useWindowFuncForMacros: true
              refresh: 1
              regex: ""
              type: query
            - current:
                text: rabbitmq.node.context_switches
                value: rabbitmq.node.context_switches
              datasource:
                type: vertamedia-clickhouse-datasource
                uid: ds-scout-altinity-ch
              definition: "SELECT DISTINCT MetricName\nFROM (\n    SELECT MetricName \n\tFROM base14.otel_metrics_gauge \n   \tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_sum\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_summary\n\tWHERE ServiceName in ($service)\n    AND TimeUnix > now() - interval 1 hour\n\t\n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_histogram\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n) AS all_metrics\nORDER BY MetricName"
              label: Metric
              name: metricName
              options: []
              query:
                adHocFilters: []
                adHocValuesQuery: ""
                add_metadata: true
                contextWindowSize: "10"
                datasourceMode: Variable
                editorMode: builder
                extrapolate: true
                format: time_series
                formattedQuery: "SELECT DISTINCT MetricName\nFROM (\n    SELECT MetricName \n\tFROM base14.otel_metrics_gauge \n   \tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_sum\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_summary\n\tWHERE ServiceName in ($service)\n    AND TimeUnix > now() - interval 1 hour\n\t\n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_histogram\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n) AS all_metrics\nORDER BY MetricName"
                interval: ""
                intervalFactor: 1
                nullifySparse: false
                query: "SELECT DISTINCT MetricName\nFROM (\n    SELECT MetricName \n\tFROM base14.otel_metrics_gauge \n   \tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_sum\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_summary\n\tWHERE ServiceName in ($service)\n    AND TimeUnix > now() - interval 1 hour\n\t\n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_histogram\n\tWHERE ServiceName in ($service)\n\tAND TimeUnix > now() - interval 1 hour\n) AS all_metrics\nORDER BY MetricName"
                rawQuery: "/* grafana dashboard='Metrics Collected v2', user='3' */\nSELECT DISTINCT MetricName\nFROM (\n    SELECT MetricName \n\tFROM base14.otel_metrics_gauge \n   \tWHERE ServiceName in ('ecs','otelcol-contrib')\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_sum\n\tWHERE ServiceName in ('ecs','otelcol-contrib')\n\tAND TimeUnix > now() - interval 1 hour\n    \n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_summary\n\tWHERE ServiceName in ('ecs','otelcol-contrib')\n    AND TimeUnix > now() - interval 1 hour\n\t\n\tUNION ALL\n    \n\tSELECT MetricName \n\tFROM base14.otel_metrics_histogram\n\tWHERE ServiceName in ('ecs','otelcol-contrib')\n\tAND TimeUnix > now() - interval 1 hour\n) AS all_metrics\nORDER BY MetricName"
                round: 0s
                skip_comments: true
                useWindowFuncForMacros: true
              refresh: 1
              regex: ""
              type: query
    time:
        from: now-1h
        to: now
    timepicker: {}
    timezone: browser
    title: Metrics Collected v2
    uid: 04af4363-d6f5-4359-af46-2fc965ddaf8d
